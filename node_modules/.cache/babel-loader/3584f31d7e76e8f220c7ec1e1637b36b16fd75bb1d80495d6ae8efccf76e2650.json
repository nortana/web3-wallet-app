{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_button = _resolveComponent(\"van-button\");\n  const _component_van_field = _resolveComponent(\"van-field\");\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  const _component_van_dialog = _resolveComponent(\"van-dialog\");\n  const _component_van_space = _resolveComponent(\"van-space\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_van_space, null, {\n    default: _withCtx(() => [_createVNode(_component_van_button, {\n      type: \"primary\",\n      onClick: $setup.createWallet\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"创建钱包\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_van_button, {\n      type: \"primary\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"导入钱包\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_van_dialog, {\n      show: $setup.show,\n      \"onUpdate:show\": _cache[1] || (_cache[1] = $event => $setup.show = $event),\n      title: \"标题\",\n      \"show-cancel-button\": \"\",\n      onConfirm: $setup.confirmPassword\n    }, {\n      default: _withCtx(() => [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_field, {\n          modelValue: $setup.password,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.password = $event),\n          type: \"password\",\n          label: \"密码\",\n          placeholder: \"请输入密码\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"show\"])]),\n    _: 1 /* STABLE */\n  }), $setup.showMn ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 0\n  }, [_createElementVNode(\"p\", null, _toDisplayString($setup.mnemonic), 1 /* TEXT */), _createVNode(_component_van_button, {\n    type: \"primary\",\n    size: \"mini\",\n    onClick: $setup.confrimSaveMnemonic\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"主要按钮\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" speed three jeans attend alarm runway champion soccer ring turkey cabbage crack \")], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_van_dialog, {\n    show: $setup.showMnDialog,\n    \"onUpdate:show\": _cache[3] || (_cache[3] = $event => $setup.showMnDialog = $event),\n    title: \"请输入助记词\",\n    \"show-cancel-button\": \"\",\n    onConfirm: $setup.confirmMn\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_cell_group, {\n      inset: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_van_field, {\n        modelValue: $setup.mnemonic2,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.mnemonic2 = $event),\n        label: \"助记词\",\n        placeholder: \"请输入助记词\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","_createVNode","_component_van_space","default","_withCtx","_component_van_button","type","onClick","$setup","createWallet","_createTextVNode","_","_component_van_dialog","show","_cache","$event","title","onConfirm","confirmPassword","_component_van_cell_group","inset","_component_van_field","modelValue","password","label","placeholder","showMn","key","_createElementVNode","_toDisplayString","mnemonic","size","confrimSaveMnemonic","_createCommentVNode","showMnDialog","confirmMn","mnemonic2"],"sources":["D:\\a\\wallet-demo\\web3-wallet-app\\src\\components\\Button.vue"],"sourcesContent":["<script setup>\r\nimport { ref } from \"vue\";\r\nimport { showDialog, showNotify } from \"vant\";\r\nimport * as bip39 from \"bip39\";\r\nimport { hdkey } from \"ethereumjs-wallet\";\r\nimport store2 from \"store2\";\r\nimport \"vant/es/dialog/style\";\r\nimport \"vant/es/notify/style\";\r\n\r\nconst show = ref(false);\r\nconst password = ref(\"\");\r\nconst mnemonic = ref(\"\");\r\nconst mnemonic2 = ref(\"\");\r\nconst showMn = ref(false);\r\nconst showMnDialog = ref(false);\r\n\r\nconst createWallet = () => {\r\n  console.log(100);\r\n  show.value = true;\r\n};\r\n\r\nconst confirmPassword = () => {\r\n  if (password.value === \"\") {\r\n    showNotify({ type: \"danger\", message: \"请输入密码\" });\r\n  } else {\r\n    const walletInfo = store2.get(\"walletInfo\");\r\n    mnemonic.value = walletInfo\r\n      ? walletInfo[0][\"mnemonic\"]\r\n      : bip39.generateMnemonic();\r\n\r\n    if (walletInfo) {\r\n      confirmMn();\r\n    } else {\r\n      showMn.value = true;\r\n    }\r\n  }\r\n};\r\n\r\nconst confrimSaveMnemonic = () => {\r\n  showMnDialog.value = true;\r\n};\r\n\r\nconst confirmMn = async () => {\r\n  //console.log(mnemonic.value)\r\n  // console.log(mnemonic2.value)\r\n\r\n  showMn.value = false;\r\n  const storWallet = store2.get(\"walletInfo\") || [];\r\n  if (mnemonic.value !== mnemonic2.value && storWallet.length === 0) {\r\n    return\r\n  }\r\n    console.log(\"成功\");\r\n    const seed = await bip39.mnemonicToSeed(mnemonic.value);\r\n    const hdwallet = hdkey.fromMasterSeed(seed);\r\n\r\n    const addressIndex = storWallet.length === 0 ? 0 : storWallet.length + 1;\r\n\r\n    const keyPair = hdwallet.derivePath(`m/44'/60'/0'/0/${addressIndex}`);\r\n    const wallet = keyPair.getWallet();\r\n\r\n    const lowerCaseAddress = wallet.getAddressString();\r\n    const checkSumAddress = wallet.getChecksumAddressString();\r\n    const privateKey = wallet.getPrivateKey.toString(\"hex\");\r\n    const keyStore = await wallet.toV3(password.value);\r\n\r\n    const walletObj = {\r\n      id: addressIndex,\r\n      address: lowerCaseAddress,\r\n      privateKey,\r\n      keyStore,\r\n      mnemonic: mnemonic.value,\r\n      balance: 0,\r\n\r\n    }\r\n\r\n    const walletInfo =  storWallet.push(walletObj)\r\n\r\n    store2(\"walletInfo\", walletInfo);\r\n  \r\n};\r\n</script>\r\n\r\n\r\n<template>\r\n  <van-space>\r\n    <van-button type=\"primary\" @click=\"createWallet\">创建钱包</van-button>\r\n    <van-button type=\"primary\">导入钱包</van-button>\r\n    <van-dialog\r\n      v-model:show=\"show\"\r\n      title=\"标题\"\r\n      show-cancel-button\r\n      @confirm=\"confirmPassword\"\r\n    >\r\n      <van-cell-group inset>\r\n        <van-field\r\n          v-model=\"password\"\r\n          type=\"password\"\r\n          label=\"密码\"\r\n          placeholder=\"请输入密码\"\r\n        />\r\n      </van-cell-group>\r\n    </van-dialog>\r\n  </van-space>\r\n  <template v-if=\"showMn\">\r\n    <p>{{ mnemonic }}</p>\r\n    <van-button type=\"primary\" size=\"mini\" @click=\"confrimSaveMnemonic\"\r\n      >主要按钮</van-button\r\n    >\r\n    speed three jeans attend alarm runway champion soccer ring turkey cabbage\r\n    crack\r\n  </template>\r\n\r\n  <van-dialog\r\n    v-model:show=\"showMnDialog\"\r\n    title=\"请输入助记词\"\r\n    show-cancel-button\r\n    @confirm=\"confirmMn\"\r\n  >\r\n    <van-cell-group inset>\r\n      <van-field\r\n        v-model=\"mnemonic2\"\r\n        label=\"助记词\"\r\n        placeholder=\"请输入助记词\"\r\n      />\r\n    </van-cell-group>\r\n  </van-dialog>\r\n</template>\r\n\r\n<style>\r\np {\r\n  user-select: all;\r\n}\r\n</style>"],"mappings":";;;;;;;uBAAAA,mBAAA,CAAAC,SAAA,SAoFEC,YAAA,CAkBYC,oBAAA;IAtGdC,OAAA,EAAAC,QAAA,CAqFI,MAAkE,CAAlEH,YAAA,CAAkEI,qBAAA;MAAtDC,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAEC,MAAA,CAAAC;;MArFvCN,OAAA,EAAAC,QAAA,CAqFqD,MAAI,CArFzDM,gBAAA,CAqFqD,MAAI,E;MArFzDC,CAAA;QAsFIV,YAAA,CAA4CI,qBAAA;MAAhCC,IAAI,EAAC;IAAS;MAtF9BH,OAAA,EAAAC,QAAA,CAsF+B,MAAI,CAtFnCM,gBAAA,CAsF+B,MAAI,E;MAtFnCC,CAAA;QAuFIV,YAAA,CAcaW,qBAAA;MAbHC,IAAI,EAAEL,MAAA,CAAAK,IAAI;MAxFxB,iBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAwFoBP,MAAA,CAAAK,IAAI,GAAAE,MAAA;MAClBC,KAAK,EAAC,IAAI;MACV,oBAAkB,EAAlB,EAAkB;MACjBC,SAAO,EAAET,MAAA,CAAAU;;MA3FhBf,OAAA,EAAAC,QAAA,CA6FM,MAOiB,CAPjBH,YAAA,CAOiBkB,yBAAA;QAPDC,KAAK,EAAL;MAAK;QA7F3BjB,OAAA,EAAAC,QAAA,CA8FQ,MAKE,CALFH,YAAA,CAKEoB,oBAAA;UAnGVC,UAAA,EA+FmBd,MAAA,CAAAe,QAAQ;UA/F3B,uBAAAT,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA+FmBP,MAAA,CAAAe,QAAQ,GAAAR,MAAA;UACjBT,IAAI,EAAC,UAAU;UACfkB,KAAK,EAAC,IAAI;UACVC,WAAW,EAAC;;QAlGtBd,CAAA;;MAAAA,CAAA;;IAAAA,CAAA;MAuGkBH,MAAA,CAAAkB,MAAM,I,cAAtB3B,mBAAA,CAOWC,SAAA;IA9Gb2B,GAAA;EAAA,IAwGIC,mBAAA,CAAqB,WAAAC,gBAAA,CAAfrB,MAAA,CAAAsB,QAAQ,kBACd7B,YAAA,CACoBI,qBAAA;IADRC,IAAI,EAAC,SAAS;IAACyB,IAAI,EAAC,MAAM;IAAExB,OAAK,EAAEC,MAAA,CAAAwB;;IAzGnD7B,OAAA,EAAAC,QAAA,CA0GO,MAAI,CA1GXM,gBAAA,CA0GO,MAAI,E;IA1GXC,CAAA;MAAAD,gBAAA,CA2GK,mFAGH,E,+BA9GFuB,mBAAA,gBAgHEhC,YAAA,CAaaW,qBAAA;IAZHC,IAAI,EAAEL,MAAA,CAAA0B,YAAY;IAjH9B,iBAAApB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAiHkBP,MAAA,CAAA0B,YAAY,GAAAnB,MAAA;IAC1BC,KAAK,EAAC,QAAQ;IACd,oBAAkB,EAAlB,EAAkB;IACjBC,SAAO,EAAET,MAAA,CAAA2B;;IApHdhC,OAAA,EAAAC,QAAA,CAsHI,MAMiB,CANjBH,YAAA,CAMiBkB,yBAAA;MANDC,KAAK,EAAL;IAAK;MAtHzBjB,OAAA,EAAAC,QAAA,CAuHM,MAIE,CAJFH,YAAA,CAIEoB,oBAAA;QA3HRC,UAAA,EAwHiBd,MAAA,CAAA4B,SAAS;QAxH1B,uBAAAtB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAwHiBP,MAAA,CAAA4B,SAAS,GAAArB,MAAA;QAClBS,KAAK,EAAC,KAAK;QACXC,WAAW,EAAC;;MA1HpBd,CAAA;;IAAAA,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}