{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/* eslint-disable max-classes-per-file */\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { EventEmitter as EventEmitterAtNode } from 'events';\nconst wrapFunction = fn => params => fn(params.detail);\n/**\n * This class copy the behavior of Node.js EventEmitter class.\n * It is used to provide the same interface for the browser environment.\n */\nclass EventEmitterAtBrowser extends EventTarget {\n  constructor() {\n    super(...arguments);\n    this._listeners = {};\n    this.maxListeners = Number.MAX_SAFE_INTEGER;\n  }\n  on(eventName, fn) {\n    this.addEventListener(eventName, fn);\n    return this;\n  }\n  once(eventName, fn) {\n    const onceCallback = params => __awaiter(this, void 0, void 0, function* () {\n      this.off(eventName, onceCallback);\n      yield fn(params);\n    });\n    return this.on(eventName, onceCallback);\n  }\n  off(eventName, fn) {\n    this.removeEventListener(eventName, fn);\n    return this;\n  }\n  emit(eventName, params) {\n    const event = new CustomEvent(eventName, {\n      detail: params\n    });\n    return super.dispatchEvent(event);\n  }\n  listenerCount(eventName) {\n    const eventListeners = this._listeners[eventName];\n    return eventListeners ? eventListeners.length : 0;\n  }\n  listeners(eventName) {\n    return this._listeners[eventName].map(value => value[0]) || [];\n  }\n  eventNames() {\n    return Object.keys(this._listeners);\n  }\n  removeAllListeners() {\n    Object.keys(this._listeners).forEach(event => {\n      this._listeners[event].forEach(listener => {\n        super.removeEventListener(event, listener[1]);\n      });\n    });\n    this._listeners = {};\n    return this;\n  }\n  setMaxListeners(maxListeners) {\n    this.maxListeners = maxListeners;\n    return this;\n  }\n  getMaxListeners() {\n    return this.maxListeners;\n  }\n  addEventListener(eventName, fn) {\n    const wrappedFn = wrapFunction(fn);\n    super.addEventListener(eventName, wrappedFn);\n    if (!this._listeners[eventName]) {\n      this._listeners[eventName] = [];\n    }\n    this._listeners[eventName].push([fn, wrappedFn]);\n  }\n  removeEventListener(eventName, fn) {\n    const eventListeners = this._listeners[eventName];\n    if (eventListeners) {\n      const index = eventListeners.findIndex(item => item[0] === fn);\n      if (index !== -1) {\n        super.removeEventListener(eventName, eventListeners[index][1]);\n        eventListeners.splice(index, 1);\n      }\n    }\n  }\n}\n// eslint-disable-next-line import/no-mutable-exports\nlet EventEmitterType;\n// Check if the code is running in a Node.js environment\nif (typeof window === 'undefined') {\n  EventEmitterType = EventEmitterAtNode;\n} else {\n  // Fallback for the browser environment\n  EventEmitterType = EventEmitterAtBrowser;\n}\nexport class EventEmitter extends EventEmitterType {}","map":{"version":3,"names":["EventEmitter","EventEmitterAtNode","wrapFunction","fn","params","detail","EventEmitterAtBrowser","EventTarget","constructor","_listeners","maxListeners","Number","MAX_SAFE_INTEGER","on","eventName","addEventListener","once","onceCallback","__awaiter","off","removeEventListener","emit","event","CustomEvent","dispatchEvent","listenerCount","eventListeners","length","listeners","map","value","eventNames","Object","keys","removeAllListeners","forEach","listener","setMaxListeners","getMaxListeners","wrappedFn","push","index","findIndex","item","splice","EventEmitterType","window"],"sources":["../../src/event_emitter.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}