{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fromQuorumWallet = exports.fromKryptoKit = exports.fromEtherCamp = exports.fromEtherWallet = void 0;\nvar crypto = __importStar(require(\"crypto\"));\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar scrypt_js_1 = require(\"scrypt-js\");\nvar index_1 = __importDefault(require(\"./index\"));\nvar utf8 = require('utf8');\nvar aesjs = require('aes-js');\nfunction runCipherBuffer(cipher, data) {\n  return Buffer.concat([cipher.update(data), cipher.final()]);\n}\nvar evpKdfDefaults = {\n  count: 1,\n  keysize: 16,\n  ivsize: 16,\n  digest: 'md5'\n};\nfunction mergeEvpKdfOptsWithDefaults(opts) {\n  if (!opts) {\n    return evpKdfDefaults;\n  }\n  return {\n    count: opts.count || evpKdfDefaults.count,\n    keysize: opts.keysize || evpKdfDefaults.keysize,\n    ivsize: opts.ivsize || evpKdfDefaults.ivsize,\n    digest: opts.digest || evpKdfDefaults.digest\n  };\n}\n/*\n * opts:\n * - digest - digest algorithm, defaults to md5\n * - count - hash iterations\n * - keysize - desired key size\n * - ivsize - desired IV size\n *\n * Algorithm form https://www.openssl.org/docs/manmaster/crypto/EVP_BytesToKey.html\n *\n * FIXME: not optimised at all\n */\nfunction evp_kdf(data, salt, opts) {\n  var params = mergeEvpKdfOptsWithDefaults(opts);\n  // A single EVP iteration, returns `D_i`, where block equlas to `D_(i-1)`\n  function iter(block) {\n    var hash = crypto.createHash(params.digest);\n    hash.update(block);\n    hash.update(data);\n    hash.update(salt);\n    block = hash.digest();\n    for (var i_1 = 1, len = params.count; i_1 < len; i_1++) {\n      hash = crypto.createHash(params.digest);\n      hash.update(block);\n      block = hash.digest();\n    }\n    return block;\n  }\n  var ret = [];\n  var i = 0;\n  while (Buffer.concat(ret).length < params.keysize + params.ivsize) {\n    ret[i] = iter(i === 0 ? Buffer.alloc(0) : ret[i - 1]);\n    i++;\n  }\n  var tmp = Buffer.concat(ret);\n  return {\n    key: tmp.slice(0, params.keysize),\n    iv: tmp.slice(params.keysize, params.keysize + params.ivsize)\n  };\n}\n// http://stackoverflow.com/questions/25288311/cryptojs-aes-pattern-always-ends-with\nfunction decodeCryptojsSalt(input) {\n  var ciphertext = Buffer.from(input, 'base64');\n  if (ciphertext.slice(0, 8).toString() === 'Salted__') {\n    return {\n      salt: ciphertext.slice(8, 16),\n      ciphertext: ciphertext.slice(16)\n    };\n  }\n  return {\n    ciphertext: ciphertext\n  };\n}\n/*\n * Third Party API: Import a wallet generated by EtherWallet\n * This wallet format is created by https://github.com/SilentCicero/ethereumjs-accounts\n * and used on https://www.myetherwallet.com/\n */\nfunction fromEtherWallet(input, password) {\n  var json = typeof input === 'object' ? input : JSON.parse(input);\n  var privateKey;\n  if (!json.locked) {\n    if (json.private.length !== 64) {\n      throw new Error('Invalid private key length');\n    }\n    privateKey = Buffer.from(json.private, 'hex');\n  } else {\n    if (typeof password !== 'string') {\n      throw new Error('Password required');\n    }\n    if (password.length < 7) {\n      throw new Error('Password must be at least 7 characters');\n    }\n    // the \"encrypted\" version has the low 4 bytes\n    // of the hash of the address appended\n    var hash = json.encrypted ? json.private.slice(0, 128) : json.private;\n    // decode openssl ciphertext + salt encoding\n    var cipher = decodeCryptojsSalt(hash);\n    if (!cipher.salt) {\n      throw new Error('Unsupported EtherWallet key format');\n    }\n    // derive key/iv using OpenSSL EVP as implemented in CryptoJS\n    var evp = evp_kdf(Buffer.from(password), cipher.salt, {\n      keysize: 32,\n      ivsize: 16\n    });\n    var decipher = crypto.createDecipheriv('aes-256-cbc', evp.key, evp.iv);\n    privateKey = runCipherBuffer(decipher, Buffer.from(cipher.ciphertext));\n    // NOTE: yes, they've run it through UTF8\n    privateKey = Buffer.from(utf8.decode(privateKey.toString()), 'hex');\n  }\n  var wallet = new index_1.default(privateKey);\n  if (wallet.getAddressString() !== json.address) {\n    throw new Error('Invalid private key or address');\n  }\n  return wallet;\n}\nexports.fromEtherWallet = fromEtherWallet;\n/**\n * Third Party API: Import a brain wallet used by Ether.Camp\n */\nfunction fromEtherCamp(passphrase) {\n  return new index_1.default((0, ethereumjs_util_1.keccak256)(Buffer.from(passphrase)));\n}\nexports.fromEtherCamp = fromEtherCamp;\n/**\n * Third Party API: Import a wallet from a KryptoKit seed\n */\nfunction fromKryptoKit(entropy, password) {\n  return __awaiter(this, void 0, void 0, function () {\n    function kryptoKitBrokenScryptSeed(buf) {\n      // js-scrypt calls `Buffer.from(String(salt), 'utf8')` on the seed even though it is a buffer\n      //\n      // The `buffer`` implementation used does the below transformation (doesn't matches the current version):\n      // https://github.com/feross/buffer/blob/67c61181b938b17d10dbfc0a545f713b8bd59de8/index.js\n      function decodeUtf8Char(str) {\n        try {\n          return decodeURIComponent(str);\n        } catch (err) {\n          return String.fromCharCode(0xfffd); // UTF 8 invalid char\n        }\n      }\n      var res = '',\n        tmp = '';\n      for (var i = 0; i < buf.length; i++) {\n        if (buf[i] <= 0x7f) {\n          res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i]);\n          tmp = '';\n        } else {\n          tmp += '%' + buf[i].toString(16);\n        }\n      }\n      return Buffer.from(res + decodeUtf8Char(tmp));\n    }\n    var type, privateKey, encryptedSeed, checksum, salt, aesKey, decipher;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (entropy[0] === '#') {\n            entropy = entropy.slice(1);\n          }\n          type = entropy[0];\n          entropy = entropy.slice(1);\n          if (!(type === 'd')) return [3 /*break*/, 1];\n          privateKey = (0, ethereumjs_util_1.sha256)((0, ethereumjs_util_1.toBuffer)(entropy));\n          return [3 /*break*/, 4];\n        case 1:\n          if (!(type === 'q')) return [3 /*break*/, 3];\n          if (typeof password !== 'string') {\n            throw new Error('Password required');\n          }\n          encryptedSeed = (0, ethereumjs_util_1.sha256)(Buffer.from(entropy.slice(0, 30)));\n          checksum = entropy.slice(30, 46);\n          salt = kryptoKitBrokenScryptSeed(encryptedSeed);\n          return [4 /*yield*/, (0, scrypt_js_1.scrypt)(Buffer.from(password, 'utf8'), salt, 16384, 8, 1, 32)\n          /* FIXME: try to use `crypto` instead of `aesjs`\n                               // NOTE: ECB doesn't use the IV, so it can be anything\n          var decipher = crypto.createDecipheriv(\"aes-256-ecb\", aesKey, Buffer.from(0))\n                               // FIXME: this is a clear abuse, but seems to match how ECB in aesjs works\n          privKey = Buffer.concat([\n            decipher.update(encryptedSeed).slice(0, 16),\n            decipher.update(encryptedSeed).slice(0, 16),\n          ])\n          */];\n        case 2:\n          aesKey = _a.sent();\n          decipher = new aesjs.ModeOfOperation.ecb(aesKey);\n          /* decrypt returns an Uint8Array, perhaps there is a better way to concatenate */\n          privateKey = Buffer.concat([Buffer.from(decipher.decrypt(encryptedSeed.slice(0, 16))), Buffer.from(decipher.decrypt(encryptedSeed.slice(16, 32)))]);\n          if (checksum.length > 0) {\n            if (checksum !== (0, ethereumjs_util_1.sha256)((0, ethereumjs_util_1.sha256)(privateKey)).slice(0, 8).toString('hex')) {\n              throw new Error('Failed to decrypt input - possibly invalid passphrase');\n            }\n          }\n          return [3 /*break*/, 4];\n        case 3:\n          throw new Error('Unsupported or invalid entropy type');\n        case 4:\n          return [2 /*return*/, new index_1.default(privateKey)];\n      }\n    });\n  });\n}\nexports.fromKryptoKit = fromKryptoKit;\n/**\n * Third Party API: Import a brain wallet used by Quorum Wallet\n */\nfunction fromQuorumWallet(passphrase, userid) {\n  if (passphrase.length < 10) {\n    throw new Error('Passphrase must be at least 10 characters');\n  }\n  if (userid.length < 10) {\n    throw new Error('User id must be at least 10 characters');\n  }\n  var merged = passphrase + userid;\n  var seed = crypto.pbkdf2Sync(merged, merged, 2000, 32, 'sha256');\n  return new index_1.default(seed);\n}\nexports.fromQuorumWallet = fromQuorumWallet;\nvar Thirdparty = {\n  fromEtherWallet: fromEtherWallet,\n  fromEtherCamp: fromEtherCamp,\n  fromKryptoKit: fromKryptoKit,\n  fromQuorumWallet: fromQuorumWallet\n};\nexports.default = Thirdparty;","map":{"version":3,"names":["crypto","__importStar","require","ethereumjs_util_1","scrypt_js_1","index_1","__importDefault","utf8","aesjs","runCipherBuffer","cipher","data","Buffer","concat","update","final","evpKdfDefaults","count","keysize","ivsize","digest","mergeEvpKdfOptsWithDefaults","opts","evp_kdf","salt","params","iter","block","hash","createHash","i_1","len","ret","i","length","alloc","tmp","key","slice","iv","decodeCryptojsSalt","input","ciphertext","from","toString","fromEtherWallet","password","json","JSON","parse","privateKey","locked","private","Error","encrypted","evp","decipher","createDecipheriv","decode","wallet","default","getAddressString","address","exports","fromEtherCamp","passphrase","keccak256","fromKryptoKit","entropy","kryptoKitBrokenScryptSeed","buf","decodeUtf8Char","str","decodeURIComponent","err","String","fromCharCode","res","type","sha256","toBuffer","encryptedSeed","checksum","scrypt","aesKey","_a","sent","ModeOfOperation","ecb","decrypt","fromQuorumWallet","userid","merged","seed","pbkdf2Sync","Thirdparty"],"sources":["../src/thirdparty.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}