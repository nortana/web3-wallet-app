{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, createElementVNode as _createElementVNode } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_button = _resolveComponent(\"van-button\");\n  const _component_van_cell = _resolveComponent(\"van-cell\");\n  const _component_van_field = _resolveComponent(\"van-field\");\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  const _component_van_dialog = _resolveComponent(\"van-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.walletInfoAddressFilter, (item, index) => {\n    return _openBlock(), _createBlock(_component_van_cell, {\n      title: item.address,\n      icon: \"user-o\",\n      key: index\n    }, {\n      \"right-icon\": _withCtx(() => [_createVNode(_component_van_button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: $event => $setup.getPassword(item.keyStore, item.address)\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(item.balance), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"title\"]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createVNode(_component_van_dialog, {\n    show: $setup.show,\n    \"onUpdate:show\": _cache[1] || (_cache[1] = $event => $setup.show = $event),\n    title: \"标题\",\n    \"show-cancel-button\": \"\",\n    onConfirm: $setup.confirmPassword\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_cell_group, {\n      inset: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_van_field, {\n        modelValue: $setup.password,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.password = $event),\n        type: \"password\",\n        label: \"密码\",\n        placeholder: \"请输入密码\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","_createElementVNode","_renderList","$setup","walletInfoAddressFilter","item","index","_createBlock","_component_van_cell","title","address","icon","key","_withCtx","_createVNode","_component_van_button","type","size","onClick","$event","getPassword","keyStore","default","_createTextVNode","_toDisplayString","balance","_","_component_van_dialog","show","_cache","onConfirm","confirmPassword","_component_van_cell_group","inset","_component_van_field","modelValue","password","label","placeholder"],"sources":["D:\\a\\wallet-demo\\web3-wallet-app\\src\\components\\AccountList.vue"],"sourcesContent":["<script setup>\r\nimport { ref, defineProps, compile, computed } from \"vue\";\r\nimport Web3 from \"web3\";\r\nimport ethwallet from \"ethereumjs-wallet\"\r\n\r\nconst web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\r\n\r\nconst show = ref(false);\r\nconst password = ref(\"\");\r\nconst keyStore = ref(\"\");\r\nconst address = ref(\"\");\r\n\r\n\r\n\r\nconst props = defineProps([\"wallet-info\"]);\r\n\r\n//keyStore.value, password.value\r\nconst send = async () => {\r\n  let walletobj;\r\n  try {\r\n    walletobj = await ethwallet.fromVw(keystore, pwd);\r\n  } catch (error) {\r\n    alert(\"密码错误\");\r\n    return false;\r\n  }\r\n  let key = walletobj.getPrivateKey().toString('hex');\r\n  const privatekey = Buffer(key,\"hex\");\r\n  let fromaddress = wallet.address;\r\n\r\n  let nonce = await web3.eth.getTransactionCount(fromaddress)\r\n\r\n  let gasPrice = await web3.eth.getGasPrice();\r\n\r\n  let balance = web3.utils.toWei\r\n\r\n\r\n\r\n\r\n\r\n};\r\n\r\nconst getPassword = (keyStore,address) => {\r\n  show.value = true;\r\n  keyStore.value = keyStore;\r\n  address.value = address;\r\n};\r\nconst confirmPassword = () => {\r\n  password.value = \"\";\r\n  send();\r\n};\r\n\r\nconst walletInfoAddressFilter = computed(async () => {\r\n  props.walletInfo.forEach(async (item, index) => {\r\n    const adr = item.address;\r\n    const head = item.address.slice(0, 8);\r\n    const tail = item.address.slice(item.address.length - 8);\r\n    item.address = head + \"....\" + tail;\r\n\r\n    const bresult = await web3.eth.getBalance(adr);\r\n    //根据地址获取余额\r\n    item.balance = web3.utils.fromWei(bresult, \"ether\");\r\n  });\r\n  return props.walletInfo;\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <van-cell\r\n      :title=\"item.address\"\r\n      icon=\"user-o\"\r\n      v-for=\"(item, index) in walletInfoAddressFilter\"\r\n      :key=\"index\"\r\n    >\r\n      <!-- 使用 right-icon 插槽来自定义右侧图标 -->\r\n      <template #right-icon>\r\n        <van-button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          @click=\"getPassword(item.keyStore,item.address)\"\r\n          >{{ item.balance }}</van-button\r\n        >\r\n      </template>\r\n    </van-cell>\r\n  </div>\r\n  <van-dialog\r\n    v-model:show=\"show\"\r\n    title=\"标题\"\r\n    show-cancel-button\r\n    @confirm=\"confirmPassword\"\r\n  >\r\n    <van-cell-group inset>\r\n      <van-field\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        label=\"密码\"\r\n        placeholder=\"请输入密码\"\r\n      />\r\n    </van-cell-group>\r\n  </van-dialog>\r\n</template>\r\n\r\n<style>\r\n</style>"],"mappings":";;;;;;;uBAAAA,mBAAA,CAAAC,SAAA,SAmEEC,mBAAA,CAiBM,e,kBAhBJF,mBAAA,CAeWC,SAAA,QAnFfE,WAAA,CAuE8BC,MAAA,CAAAC,uBAAuB,EAvErD,CAuEcC,IAAI,EAAEC,KAAK;yBAHrBC,YAAA,CAeWC,mBAAA;MAdRC,KAAK,EAAEJ,IAAI,CAACK,OAAO;MACpBC,IAAI,EAAC,QAAQ;MAEZC,GAAG,EAAEN;;MAGK,YAAU,EAAAO,QAAA,CACnB,MAIkC,CAJlCC,YAAA,CAIkCC,qBAAA;QAHhCC,IAAI,EAAC,SAAS;QACdC,IAAI,EAAC,OAAO;QACXC,OAAK,EAAAC,MAAA,IAAEhB,MAAA,CAAAiB,WAAW,CAACf,IAAI,CAACgB,QAAQ,EAAChB,IAAI,CAACK,OAAO;;QA/ExDY,OAAA,EAAAT,QAAA,CAgFW,MAAkB,CAhF7BU,gBAAA,CAAAC,gBAAA,CAgFcnB,IAAI,CAACoB,OAAO,iB;QAhF1BC,CAAA;;MAAAA,CAAA;;oCAqFEZ,YAAA,CAcaa,qBAAA;IAbHC,IAAI,EAAEzB,MAAA,CAAAyB,IAAI;IAtFtB,iBAAAC,MAAA,QAAAA,MAAA,MAAAV,MAAA,IAsFkBhB,MAAA,CAAAyB,IAAI,GAAAT,MAAA;IAClBV,KAAK,EAAC,IAAI;IACV,oBAAkB,EAAlB,EAAkB;IACjBqB,SAAO,EAAE3B,MAAA,CAAA4B;;IAzFdT,OAAA,EAAAT,QAAA,CA2FI,MAOiB,CAPjBC,YAAA,CAOiBkB,yBAAA;MAPDC,KAAK,EAAL;IAAK;MA3FzBX,OAAA,EAAAT,QAAA,CA4FM,MAKE,CALFC,YAAA,CAKEoB,oBAAA;QAjGRC,UAAA,EA6FiBhC,MAAA,CAAAiC,QAAQ;QA7FzB,uBAAAP,MAAA,QAAAA,MAAA,MAAAV,MAAA,IA6FiBhB,MAAA,CAAAiC,QAAQ,GAAAjB,MAAA;QACjBH,IAAI,EAAC,UAAU;QACfqB,KAAK,EAAC,IAAI;QACVC,WAAW,EAAC;;MAhGpBZ,CAAA;;IAAAA,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}